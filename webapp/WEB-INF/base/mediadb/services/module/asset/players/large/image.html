#set ( $urlutils = $context.getPageValue("url_util"))
 #if (!$urlutils)
	#set ($urlenc = $asset.sourcepath) 
#else #set ( $urlenc =
	$urlutils.encode($asset.sourcepath)) 
	#set ( $urlenc =
	$urlenc.replace("%2F", "/") ) 
#end
<div id="main-media-container">
<img id="main-media" class="emdropshadow  assetdragdrop"
	draggable="true" data-sourcepath="$urlenc" data-assetid="$asset.id"
	data-name="$asset.name" data-width="$!asset.width"
	data-height="$!asset.height"
	src="$!cdn$home/${mediadbappid}/services/module/asset/downloads/preview/extralarge/$urlenc/thumb.jpg"
	alt="$!asset.name" />

<div id="footerbase">
	<div id="footermenu">
		<div id="menuoptions">
			<ul>
			<li  class="botmenulink">					 
				<a href="" id="escapelink" > $asset </a>
			  </il>
			
				<li 	class="botmenulink	">
					<div class="dropup">
						<a class="" href="#" data-toggle="dropdown" expanded="true" >[[Downloads]]
							<span class="caret"></span></a>
							
						
			#set($searcher = $mediaarchive.searcherManager.getSearcher($catalogid, "convertpreset"))
			#set( $results = $searcher.query().exact("inputtype","image").exact("onimport","true").sort("ordering").search($context) )
			#set( $cdnprefix = $mediaarchive.getCatalogSettingValue("cdn_prefix") )
			#set($mediadbappid=$mediaarchive.getMediaDbId())
			#if( !$cdnprefix )
				#set( $cdnprefix = $context.siteRoot )
			#end
				<ul id="module-bar-select" class="dropdown-menu dropup">
						
						#set ($originalpath = $mediaarchive.asLinkToOriginal($asset) )					
							<li><a href="$home$apphome/views/modules/asset/downloads/originals/$originalpath">[[Original image]]</a></li>	
						#foreach($result in $results )						
								<li><a href="$cdnprefix$home/$mediadbappid/services/module/asset/downloads/generated/${asset.sourcepath}/${result.generatedoutputfile}/${result.generatedoutputfile}">$result.name</a></li>
						#end
						</ul>
</div>
			  </il>
				
			</ul>
		</div>
	</div>
</div>

</div>

<script>

$("#main-media-container").livequery("mouseenter", function(e)
{
	$("#footerbase").show();	
});

$("#main-media-container").livequery("mouseleave", function(e)
{
	$("#footerbase").hide();	
});

	var escp = jQuery.Event("keypress");
	escp.which = 27;
	escp.keyCode = 27;
	$("#escapelink").click().trigger(escp);
</script>


<style>
/*
#main-media:HOVER+#footerbase {
	visibility: visible;
}
*/

.botmenulink
{
margin-right: 50px;
}

#footerbase { 
	display: none;
	position: relative;
	width: 100%;
	height: 30px;
}

#footermenu {
	background-color: black;
	position: absolute;
	width: 100%;
	height: 35px;
	top: -110%;
	/* opacity: 0.8; */
}

#menuoptions {
	position: absolute;
	top: -20%;
	right: 50%;
}

#menuoptions li {
	display: inline-table;
	font-size: large;	
	font-weight: normal;
}
#menuoptions a {
	color: white;	
}

#menuoptions div {
	display: inline;
	padding: 5px;
	margin-right: 17px;
}
</style>