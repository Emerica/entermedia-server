#set( $collectionid = $context.getRequestParameter("collectionid") )
<div id="media-carousel$collectionid" class="media-carousel" style="">
#if( !$collectionassets)
	#set( $manager = $moduleManager.getBean($catalogid,"projectManager") )
	#set( $collectionassets = $manager.loadAssetsInCollection($context,$mediaarchive, $collectionid ) )
	#set( $width = $context.getRequestParameter("width") )
	#if( $width)
			#set( $zero = 0)
			#set( $width = $zero.parseInt( $width ) )
			#set( $count = $math.div($width,35) )	
			$!collectionassets.setHitsPerPage($count)
	#else
			$!collectionassets.setHitsPerPage(6)			
	#end
#end
#set( $page = $context.getRequestParameter("page") )
#if( $page)
	#set( $zero = 0)
	$!collectionassets.setPage($zero.parseInt( $page ) )	
#end
#if( $collectionassets.prevPage() )
<a class="prevpage ajax" targetdiv="media-carousel$collectionid" href="$home$apphome/components/collectionfeed/listassets.html?page=$collectionassets.prevPage()&collectionid=$collectionid"></a>
#end
	<div class="carousel-window">
		<ul>
		#foreach( $hit in $collectionassets.getPageOfHits())
			<li class="clearfix masonry-grid-cell">
			<a id="thumb${hit.id}}" class="thumb" href="$home$apphome/views/modules/asset/editor/viewer/index.html?hitssessionid=$collectionassets.getSessionId()&assetid=$hit.getId()">
				<div class="thumbframe">
					<img src="$home$apphome/views/modules/asset/downloads/preview/thumb/${hit.sourcepath}/thumb.jpg" />
				</div>	
				<div class="caption">
					<div class="stacked-field-info" title=" $hit.name "> <span>$hit.name</span> </div>
			    </div>
			</a>
		</li> 
		#end
		</ul>
	</div>
#if( $collectionassets.nextPage() )
	<a class="nextpage ajax" targetdiv="media-carousel$collectionid"  href="$home$apphome/components/collectionfeed/listassets.html?page=$collectionassets.nextPage()&collectionid=$collectionid"></a>
#end	
</div>
