<div class="ui-widget uipanel" id="left-col-search" >
				<div  class="ui-widget-header">[[Filters]]</div>
<div  class="ui-widget-content">
#set ($assetTypeSearcher = $searcherManager.getSearcher($catalogid, "assettype"))

#set ($types = $assetTypeSearcher.fieldSearch(id, "*", "name"))

#set( $notselected = $userprofile.getValues("hideassettype") ) 

<div class="subcolumns" style="white-space:nowrap;"> 
    <ul style="margin: 0; padding: 5px 0 5px 0;">  
#foreach($type in $types )

    
    #if( $notselected.contains( $type.getId() ) )
    #set( $selected = false)
    #else
    #set( $selected = true)
    #end

			
	<li style="list-style-type:none; border-bottom: 1px solid #eee; margin: 5px 0 8px 0; padding: 0 0 5px 10px;"><input class="assettypeselect" type="checkbox" name="childquery" value="$item1.getId()" #if( $selected )checked #end/> $type.name</li> 			
				
			


#end
</ul>


<form  action="$apphome/components/results/table.html" class="ajaxform" targetdiv="resultsdiv" style="margin-bottom:0;padding-right:15px;" target="_parent" name="dontshow" id="dontshow" valign="middle">
    ##<input type="hidden"  name="oemaxlevel" value="1" />
    <input type="hidden" name="catalogid" value="$!catalogid" />
    <input type="hidden" name="searchtype" value="asset" />
    <input type="hidden" name="hitssessionid" value="$hits.sessionId" />
        
    <input type="hidden" name="childquery" value="none" /> ## causes the search to re-run even when no types are selected    
</form>
<input class="btn" id="select_all" type="button" value="[[Select All]]" />


</div>
</div></div>
	


<script type="text/javascript">

applyDontShow = function()
{	
	jQuery('#spinner').css('visibility', 'visible');
	
	var inputs = jQuery('input[name="childquery"]');
	var query = "hitssessionid=$hits.getSessionId()&cache=false&profilesearchfilters=hideassettype";
	for (var i = 0; i < inputs.size(); i++)
	{
		input = inputs[i];
		if (!input.checked)
		{
			query += "&hideassettype=" + input.value;
		} 
	}
	//TODO: Why not update the results with new data like VD does?
	jQuery('#dontshow').attr('action', "$home$apphome/components/results/table.html?" + query);
	jQuery('#dontshow').submit();


}

jQuery('#select_all').click(function(){
	jQuery('.assettypeselect').each(function(){this.checked = true;});
	applyDontShow();
	return false;
});


jQuery('.assettypeselect').bind('click',applyDontShow);

</script>


