
#if (!$inputed)
	#if( $hits && !$query)
		#set( $query =  $hits.searchQuery )
	#end
	#if( $query )	
		#set( $inputed = $query.getInput($detail.id) )
	#else
		#set( $inputed = $context.getRequestParameter("${detail.id}.value") )
	#end
#end


#set( $fieldid = $detail.id )
<div id="listdetail_$fieldid" class="listdetailpicker" >

<input name="operation" type="hidden" value="matches" />

#set( $lsearcher = $searcherManager.getListSearcher( $detail ) )	


#set( $squery = $detail.query )
#set( $query = $lsearcher.createSearchQuery() )

#if( $squery && (!$detail.getType() || $detail.getType() != "textjoin") )
	#set( $query = $lsearcher.parse($squery) )
#else
	<!-- $query.addMatches("id","*")  -->
#end

#if ($detail.sort)
	$query.addSortBy($detail.sort)
#end

#set( $types = $lsearcher.search($query) )

#if($types)
	<select name="${fieldid}.value" id="${fieldid}.value" >
	<option value=""></option>
	#foreach( $type in $types )
		#set( $key = $type.id)
		<option value="$key" #if( $inputed && $key == $inputed ) selected #end>
			#esc($type.name)
		</option>
	#end
   </select>
#else
	No properties found in ../configuration/lists/#esc(${lsearcher.searchType}).xml 
#end

</div>

