<div id="permissions">
	<script type="text/javascript" charset="utf-8">
		removePerson = function(userid){
			jQuery("#permissions").load("$home$apphome/components/share/removeperson.html?assetid=$asset.id&userid=" + userid);
		}
		removeGroup = function(groupid){
			//jQuery("#permissions").load("$home$apphome/components/share/removegroup.html?assetid=$asset.id&groupid=" + groupid);
			jQuery.get("$home$apphome/components/share/removegroup.html?assetid=$asset.id&groupid=" + groupid, {}, function (data){ jQuery("#permissions").replaceWith(data); }); 
			
		}
		addAllGroups = function(userid){
			if(jQuery("#allowallgroups").is(':checked') == false) {
				jQuery("#permissions").load("$home$apphome/components/share/removeallgroups.html?assetid=$asset.id");
			} else {
				jQuery("#permissions").load("$home$apphome/components/share/addallgroups.html?assetid=$asset.id");
			}
		}
		addAll = function(userid){
			if(jQuery("#allowall").is(':checked') == false) {
				jQuery("#permissions").load("$home$apphome/components/share/removeall.html?assetid=$asset.id");
			} else {
				jQuery("#permissions").load("$home$apphome/components/share/addall.html?assetid=$asset.id");
			}
		}
	</script>
	
		<div class="access_message">
			<!-- Lock Icon MSG -->
			<img src="$home${themeprefix}/images/gfx/lock_icon.png" style="padding-right: 5px;"><span class="access_span">Private
			- Only the people listed below can access</span>
	
		</div>
		<div class="checkbox_holder">
			<input type="checkbox" id="allowallgroups" onclick="addAllGroups(); return false;" #if($isallgroups) checked="checked" #end/><span class="all_text">Allow All My Groups</span>
			<input type="checkbox" id="allowall" onclick="addAll(); return false;" #if($isall) checked="checked" #end/><span class="all_text">Allow All</span>
		</div>
		<div id="people_container">
	
			<span class="field_title" >People</span>
	
				<div class="add_person_box">
					<span class="add_person_label" title="Search * for everyone in your groups">Add People:</span> <br /> 
					<input class="addmygroupusers"	name="add_people" type="text" assetid="$asset.id"/>
					<input id="hiddenaddmygroupusers" name="hiddenaddmygroupusers" type="hidden" targetdiv="permissions" postpath="$home$apphome/components/share/addperson.html?assetid=$asset.id&userid="/>
				</div>
	
			<table class="people_table" id="people_table">
	
				<tr>
				#set( $owner = ${userManager.getUser($asset.owner)} )
					<td class="avatar"><img src="$home${themeprefix}/images/gfx/default_avatar.png"
						title="$owner"></td>
					<td class="user"> #if ($user.id == $asset.owner) (you) #else($owner) #end</td>
					<td class="userlevel">Is Owner</td>
				</tr>
				#foreach($person in $peoples)
				<tr>
					<td class="avatar"><img src="$home${themeprefix}/images/gfx/default_avatar.png"	title="$person" /></td>
					<td class="user">$person</td>
					<td class="userlevel"><a class="delete-row" href="#" title="Remove User" onclick="removePerson('$person.id');return false;"></a></td>
				</tr>
				#end
			</table>
	
	
		</div>
	
		<div id="groups_container">
	
			<span class="field_title">Groups</span>
				
				<div class="add_person_box">
	
					<span title="Search * for all">Add Group:</span> <br /> 
					<input class="addmygroups" name="add_team" type="text" assetid="$asset.id">
					<input id="hiddenaddmygroups" name="hiddenaddmygroups" type="hidden" targetdiv="permissions" postpath="$home$apphome/components/share/addgroup.html?assetid=$asset.id&groupid=">
				</div>
	
			<table class="people_table" id="groups_table">
				
				
				#foreach($group in $groups)
				<tr>
					<td class="avatar"><img src="$home${themeprefix}/images/gfx/default_avatar.png"	title="$group.name" /></td>
					<td class="user">$group.name</td>
					<td class="userlevel"><a class="delete-row" href="#" title="Remove Group" onclick="removeGroup('$group.id');return false;"></a></td>
				</tr>
				#end
	
			</table>
	
	
			
			
		</div>


</div>


