#set( $root = "$context.siteRoot$home$page.directory")
#set( $catalogid = $asset.catalogId )

#if(!$asset.sourcepath)
	#set($sourcepath = $context.getRequestParameter("sourcepath"))
#else
	#set($sourcepath = $asset.sourcepath)
#end
#set( $source = "$home/$catalogid/downloads/converted/cache/${sourcepath}/video.mp4" )
#set( $thumb = "$home/$catalogid/downloads/preview/large/${sourcepath}/thumb.jpg" )
<a href="$source" style="background-image:url($thumb)" class="mediaplayer">
	<img src="$root/play_large.png" alt="$asset"/> 
</a> 

<!--  Start Flowplayer Engine  -->		
<script type="text/javascript" src="$root/flowplayer-3.2.6.min.js"></script>

<style>

a.mediaplayer{ 
	display:block;
	width:500px;
	height:281px;
	text-align:center;
  	margin-left: auto;
    margin-right: auto;
	border:1px solid #999;
}
/* play button */
a.mediaplayer img {
	margin-top:130px;
	border:0px;
}

/* when container is hovered we alter the border color */
a.mediaplayer:hover {
	border:1px solid #000;
}


</style>		
		
<script language='javascript'>
			flowplayer('a.mediaplayer', {src: '$root/flowplayer-3.2.7.swf', wmode: 'transparent'},
			{  
			    // configure clip to use "lighthttpd" plugin for providing video data 
			    clip: 
			    { 
			        url: '$source', 
			        provider: 'lighttpd',
			        scaling: 'fit' 
		    	}, 
			     // streaming plugins are configured normally under the plugins node 
			    plugins: 
			    { 
			        lighttpd: 
			        { 
			            url: '$root/flowplayer.pseudostreaming-3.2.5.swf' 
			        },
			        controls: 
			        {
						url: '$root/flowplayer.controls-3.2.5.swf'
					}		 
    			 },
    			 canvas: 
    			 { 
	    			 backgroundColor: '#2D2C2C',
	    			 backgroundGradient: 'none'
	    			
    			 }
			});		
</script>