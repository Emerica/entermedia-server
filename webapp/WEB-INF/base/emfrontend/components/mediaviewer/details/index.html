#set($hitssessionid = $hits.sessionId )

<div id="asset-info">
 
 <div>
 <div style="padding: 0; border-top: 1px solid #eee;"></div>

<div id="asset-data" class="clearfix">
#set( $archive = $searcherManager.getPropertyDetailsArchive($catalogid) )

			$context.putPageValue("origURL", "$apphome/assets/${asset.sourcePath}.html")
			$context.putPageValue("data",$asset)	
			$context.putPageValue("searcher",$mediaarchive.getAssetSearcher() )	
			
			#if( $asset.assettype && $archive.viewExists("asset/assettype/$asset.assettype/general") )
			  #set ($view = "asset/assettype/$asset.assettype/general")
			#else
			  #set ($view = "asset/assettype/default/general")
			#end
			$context.putPageValue("view",$view)	
			$pages.include("/$applicationid/components/xml/detailviewer.html", $context)

<div >
#set( $views = $mediaarchive.getAssetStatsManager().getViewsForAsset($asset))
<span class="emdetailviews">
#if( $views > 0 )
$views views
#end
</span>
#if( $asset.isFolder() )
<a class="btn" href="$home$apphome/views/detaileditor/attachments/index.html?sourcepath=$asset.sourcepath&hitssessionid=$!{hitssessionid}">Attachments</a>
#end
			#if( $asset.assettype && $archive.viewExists("asset/assettype/$asset.assettype/fileproperties") )
			  #set ($view = "asset/assettype/$asset.assettype/fileproperties")
			#else
			  #set ($view = "asset/assettype/default/fileproperties")
			#end
			$context.putPageValue("view",$view)	
			$pages.include("/$applicationid/components/xml/detailviewer.html", $context)
</div>
	
</div>
	
#if( $asset.getKeywords().size() > 0 || $asset.getCategories().size() > 0 )
<div class="asset-details-more" style="display: none; padding: 0 10px;">
	#set( $libraries = $asset.getLibraries())
	#if( $libraries.size() > 0)
	<h3>Libraries</h3>
		<p style="line-height: 25px;">
	#foreach($library in $libraries)
		  
		 #set( $ldata = $searcherManager.getData($catalogid,"library",$library) )
		 #set( $division = $searcherManager.getData($catalogid,"division",$ldata.division ) )
		 
		<a href="$home$apphome/views/search/search.html?searchtype=asset&field=libraries&operation=matches&libraries.value=$ldata.id" class="">$division / $ldata</a>

	#end
	</p>
	#end
	
	
	#if( $asset.hasKeywords() )
	<h3>Related Tags</h3>
		<p style="line-height: 25px;">
			#foreach ($tag in $asset.keywords)
				<a href="$home$apphome/views/search/search.html?searchtype=asset&field=$catalogid:asset/details:description&operation=matches&description.value=$tag">$tag</a>
			#end
		</p>
	#end	
	<h3>Categories</h3>
		#foreach ($category in $asset.categories) 
			<a href="$home$apphome/views/search/category.html?categoryid=${category.id}">$category.name</a> 
		#end
		
	#end
	
	#if ($canviewslideshow)
	
	#set( $type = $mediaarchive.getMediaRenderType($asset.fileFormat))
	#if( $type != "video" )
		<div>	
				<a class="slideshow emdialog" href="$home$link" target="_parent"
					pageturner="$home$apphome/components/lightbox/pageturner.xml?hitssessionid=$hits.getSessionId()&amp;index=$indexOf"
					title="[[Slideshow]]"><img style="vertical-align:middle;padding-right: 10px;" src="$home$themeprefix/images/buttons/fullscreen.png" /></a>
		</di>
	#end	
	
	#end
	</div>		

	
<div style="margin: 20px 0 0 0; padding: 0; border-top: 1px solid #eee;"></div>
<center><a class="btn showhide" style="border-top: none; margin: 0 0 15px 0; border-radius: 0 0 5px 5px; font-size: 10px;" id="showmore"><span>Show More</span><span style="display: none;">Show Less</span></a></center>

</div>

<script>
	
	$('#showmore').click(function() {
		$('.asset-details-more').toggle('fast');
		$('.showhide span').toggle();
	});

	
</script>
