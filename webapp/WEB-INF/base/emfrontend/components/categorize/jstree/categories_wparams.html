#set($rootcategory = $mediaarchive.getCategoryArchive().getRootCategory())
#set($children = $rootcategory.children)

#set( $params = $context.getRequestParameters("selected") )

#macro(showtree $categories)	
		#foreach($cat in $categories)
		#set( $leaf = $cat.hasChildren())
		#set( $open = $cat.hasChildren())
		#set( $checked = false )
		#set( $checked = $params.contains($cat.getId()))
		<li id="$cat.id" class="#if( $leaf ) jstree-leaf #end #if( $open )   #end #if( $checked ) jstree-checked #end " ><a href="$cat.id"> $cat.name</a>
		#if(!$leaf)
		   <ul>
			  #showtree($cat.children)
		   </ul>
		#end
		</li>
		#end
#end		
<ul  class="ltr">
	<li id="$rootcategory.id" class="jstree-open" ><a href="$rootcategory.id">$rootcategory.name</a>
		<ul>
			#showtree($children)
		</ul>
	</li>
</ul>