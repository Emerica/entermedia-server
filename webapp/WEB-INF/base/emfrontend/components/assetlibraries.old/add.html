
<h4>[[Add LibraryXX]]:</h4> 

xcxx

$content.filter_division

#set( $divisions = $searcherManager.getList($catalogid,"division") )
#if( $content.filter_division )

#elseif( $divisions.size() > 1)
<tr class="emsearchfieldrow">
	<td valign="middle" nowrap="" align="left" class="emsearchfieldvalue" id="detail_division">
		<select name="division.value"  id="parent${inputid}" onchange='loadlist("#detail_library", "$catalogid", "library", "Library", "libraries", "division", $(this).val(),"$!val" )'>
		<option value="">-- Choose Division --</option>
		#foreach( $division in $divisions)
			<option value="$division.id">$division</option>
		#end
		</select>
	</td>
</tr>
#end

<form name="adder" class="ajaxform" targetdiv="emvalueeditor" action="$home$apphome/components/libraries/addfinish.html">

<input type="hidden" name="fieldname" value="libraries" /><br>

		<div id="detail_library">


#set ($catalogid = $context.getRequestParameter('catalogid'))
#set ($fieldname = $context.getRequestParameter('fieldname'))
#set ($searchtype = $context.getRequestParameter('searchtype'))
#set ($foreignkeyid = $context.getRequestParameter('foreignkeyid')) 
#set ($foreignkeyvalue = $context.getRequestParameter('foreignkeyvalue')) 
#set ($label = $context.getRequestParameter('label')) 
#if( $foreignkeyid && $foreignkeyvalue)
	#set( $searcher = $searcherManager.getSearcher($catalogid,$searchtype) )
	#set( $hits = $searcher.fieldSearch($foreignkeyid,$foreignkeyvalue) )
#else
	#set( $hits = $searcherManager.getList($catalogid,$searchtype) )
#end
<select name="${fieldname}.value">
<option value=""></option>
#foreach( $hit in $hits)
	<option #if ($val && $val == $hit.id) selected #end value="$hit.id">$hit</option>
#end
</select>


		</div>		


<input type="hidden" name="assetid" value="$context.getRequestParameter('assetid')" /><br>


<input class="btn small" type="submit" value="[[Add]]" />
</form>

