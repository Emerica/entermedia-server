#set( $view = $context.getRequestParameter("view") )
#if( !$view )
	#set( $view = "${searcher.searchType}/${searcher.searchType}search.xml")
#end
	$context.putPageValue("hits",$datalist)	
	#if( $view )
		#set( $details = $searcher.getDetailsForView($view, $userprofile) )	
	#else
	#set( $details = $searcher.getSearchProperties($user) )
	#end
	$context.putPageValue("details",$details)	


<div class="tab" id="data-tab">
	
	<div class="tab-actions clearfix">
		<a class="btn ajax" targetdivinner="datamanager-workarea" href="$home$content.dataroot/edit/addnew.html?catalogid=$searcher.catalogId&searchtype=$searcher.searchType&origURL=$!origURL&oemaxlevel=1">[[Add New Record]]</a>
		<a class="btn" href="$home$content.dataroot/list/reindex.html?catalogid=$searcher.catalogId&searchtype=$searcher.searchType&origURL=$!origURL">[[Reindex]]</a>
		<a class="btn ajax" targetdivinner="datamanager-workarea" href="$home$content.dataroot/import/index.html?catalogid=$searcher.catalogId&searchtype=$searcher.searchType&origURL=$!origURL&oemaxlevel=1">[[Import]]</a>
		<a class="btn" href="$home$content.dataroot/export/export.csv?catalogid=$searcher.catalogId&searchtype=$searcher.searchType&origURL=$!origURL&hitssessionid=${datalist.getSessionId()}">[[Export to CSV]]</a>
		<a class="btn confirm red" href="$home$content.dataroot/list/deleteall.html?catalogid=$searcher.catalogId&searchtype=$searcher.searchType&origURL=$!origURL" confirm="Delete All Records?" >[[Delete All]]</a>
		<a class="btn right flat-left up" id="advanced-dm-search-btn">\/</a>
		<script>
			$('#advanced-dm-search-btn').click(function(){
				if ( $('#advanced-dm-search-btn').hasClass('flat-left') ) {
					$('#simple-dm-search').hide();
					$('#advanced-dm-search').show();
					$('#advanced-dm-search-btn').removeClass('flat-left');
					$('#advanced-dm-search-btn').html('/\\');
				} else {
					$('#simple-dm-search').show();
					$('#advanced-dm-search').hide();
					$('#advanced-dm-search-btn').addClass('flat-left');
					$('#advanced-dm-search-btn').html('\\/');
				}
			});
		</script>
		<form id="simple-dm-search" style="float: right;" name="search" method="post" action="$home$content.dataroot/list/index.html">
		
		<input type="text" class="field" name="description.value" value='$!datalist.getInput("description")'/>
		<input type="hidden" name="field" value="description"/>
		<input type="hidden" name="catalogid" value="$!searcher.catalogId" />
		<input type="hidden" name="searchtype" value="$!searcher.searchType" />
		<input type="hidden" name="operation" value="startswith" />
		<input type="hidden" name="view" value="$!view" />
		
		<input class="btn flat-right" type="submit" value="Search" />
		</form>
		
		
	
		#set( $view = "${searcher.searchType}/${searcher.searchType}results.xml")
		#set( $details = $searcher.getDetailsForView($view, $userprofile) )	
		#if(!$details)
		#set( $details = $searcher.getStoredProperties() )
		#end
		$context.putPageValue("details",$details)	
		<div id="advanced-dm-search" style="display: none;">
			<form id="simple-dm-search" style="width: 100%" name="search" method="post" action="$home$content.dataroot/list/index.html">
					$pages.include("/${applicationid}/components/xml/searchfields.html",$context)
					<input type="hidden" name="catalogid" value="$!searcher.catalogId" />
					<input type="hidden" name="searchtype" value="$!searcher.searchType" />
					<input type="hidden" name="view" value="$!view" />
					<input class="btn right" type="submit" value="Search" />
			</form>
		</div>
		
	</div>

	

	<div id="dm-container">
		<div id="emselectable">
		<table class="striped emdata">
		<tr class="tableheader">
		#foreach( $detail in $details )
		<th align="left" nowrap class="sortable">$detail.getText($context)</th>
		#end
		</tr>	
		#set( $origURL = $context.getRequestParameter("origURL" ) )				
			
		#foreach ( $hit in $datalist.getPageOfHits() )
			<tr rowid="$hit.id">
			#foreach( $detail in $details )
				#set( $newval = "$!hit.get($detail.getId())")
				#if($newval && $newval != "" && $detail.isList())
					#set( $newval = $searcherManager.getListData($detail,$newval) )
				#end			
				<td nowrap>$newval</td>
			#end
			</tr>
		#end
		</table>
			<form name="editrow" action="$home$content.dataroot/edit/edit.html">
				<input type="hidden" name="id" id="emselectedrow" />
				<input type="hidden" name="origURL" id="$!origURL" />
				<input type="hidden" name="searchtype" value="$searcher.getSearchType()" />
			</form>
		</div>
	
	</div>
	
	
	<div id="pages" style="text-align: left; padding-left: 20px;">
	
		#if ( $datalist.totalPages == 0 )
		#elseif( $datalist.totalPages == 1 )
		#elseif( $datalist )
			#set($thispage = $datalist.getPage())
			[[Page]] <b>$thispage</b> [[of]] $datalist.totalPages  
			&nbsp;&nbsp;
			
			#if( $datalist.prevPage() )
			<a href="$home$page.path?page=$datalist.prevPage()&hitssessionid=$datalist.sessionId&origURL=$!origURL&catalogid=$searcher.catalogId&searchtype=$searcher.searchType" ><b>&lt;&lt;  [[Back]]</a>
			#end
			
			#if ( $datalist.nextPage() )
			<a style="margin-left: 10px;" href="$home$page.path?page=$datalist.nextPage()&hitssessionid=$datalist.sessionId&origURL=$!origURL&catalogid=$searcher.catalogId&searchtype=$searcher.searchType" ><b> [[Forward]] &gt;&gt; </a>
			#end
		#end
	</div>
		<p style="padding-left: 20px; padding-top: 5px;">[[Found]] $datalist.size() [[Records]]</p>
	
	
	#set( $thispage = $datalist.getPage()+-1)
	#set( $start = $datalist.getHitsPerPage() * $thispage )
	#set( $end = $start + $datalist.getPageOfHits().size() )
	#set( $start = $start + 1)
	
</div>




