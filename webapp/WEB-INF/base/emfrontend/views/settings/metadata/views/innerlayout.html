#set($searcher = $mediaarchive.getAssetSearcher())
#set($screenid = $context.getRequestParameter("screenid"))
<div class="subcolumns">
          <div class="c33l">
            <div class="subcl">
<br>
<div class="ui-widget" style="overflow: hidden;">
<div class="ui-widget-header">Views</div>
<div  class="ui-widget-content emselectmenu">

#set($views = $searcherManager.getList("$catalogid", "assettype/views"))

Screen Name <br>
<select style="margin-left: 20px;" id="screenid" name="screenid" onchange="loadViews();">
		<option value="" ></option>
			#foreach( $target in $views)
				<option value="$target.id" #if($screenid == $target.id)selected="selected"#end>$target</option>
			#end
		</select>
<br><br>
#if( $screenid )
For Asset Type<br>
#set($current = $context.getRequestParameter("assettype")) 
#set($assettypesearcher = $searcherManager.getSearcher($catalogid, "assettype"))

<select style="margin-left: 20px;" id="assettype" name="assettype" onchange="loadViews()">
		<option value="default" >Default</option>
			#foreach($item in $assettypesearcher.fieldSearch("id","*","textUp"))
				<option #if($current == $item.id) selected #end value="$item.id">$item</option>
			#end
		</select>
#end
</div>
</div>

</div>
          </div>
          <div class="c66r">
            <div class="subcr" >


<div id="propertyedit">            
$pages.includeContent()
</div>


<script type="text/javascript">

	loadViews = function() {
		var selected = jQuery("#screenid option:selected");
		var selectedid = selected.val();

		var assettype = jQuery("#assettype option:selected");
		var assettypeid = assettype.val();

		var view = "";
		if( assettypeid == 'default' || assettypeid == undefined)
		{
			view = "asset/assettype/default/" + selectedid;
		}
		else
		{
			view = "asset/assettype/" + assettypeid + "/" + selectedid;
		}
		document.location.href = "$home$apphome/views/settings/metadata/views/index.html?view=" + view + "&screenid=" + selectedid + "&assettype=" +  assettypeid +"&catalogid=${mediaarchive.getCatalogId()}&searchtype=${searcher.getSearchType()}";
	}

	removeProperty = function() {
		var selected = jQuery("select option:selected");
		var selectedid = selected.val();
		jQuery("#modifyproperties").load("$home$apphome/views/settings/metadata/fields/removeproperty.html?id=" + selectedid + "&catalogid=${mediaarchive.getCatalogId()}&searchtype=${searcher.getSearchType()}");
	}
	
	createProperty = function() {
		jQuery("#modifyproperties").load("$home$apphome/views/settings/metadata/fields/addproperty.html?catalogid=${mediaarchive.getCatalogId()}&searchtype=${searcher.getSearchType()}");
	}
</script>

</div></div></div>