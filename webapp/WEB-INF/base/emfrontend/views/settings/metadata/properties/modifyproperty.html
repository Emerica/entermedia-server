<div id="editlayout" class="modify-property">	

<h1 id="attributeEditorTitle"></h1>
		
<form id="dataeditor" name="dataeditor" method="post" action="saveproperty.html" >
	<input name="save" type="hidden" value="true" />
	<input name="id" type="hidden" value="$!property.id" />
	<input name="catalogid" type="hidden" value="$searcher.catalogId" />
	<input name="searchtype" type="hidden" value="$searcher.getSearchType()" />
	
	<table width="100%">
	<tr> <td class="td-right">[[Attribute Name]]:</td> <td class="td-left"><input name="newid" value="$!property.id" /></td> </tr>
	<tr> <td class="td-right">[[UI Label]]:</td> <td class="td-left"><input name="name" id="label" value="$!property.name" /></td> </tr>
	<tr> <td class="td-right">[[External ID]]:</td> <td class="td-left"><input name="externalid" value="$!property.externalId" /></td> </tr>

	
	<tr> <td class="td-right">Editable:</td> <td class="td-left"><input name="editable" type="checkbox" #if ($property.editable == true) checked #end value="true"/> </td> </tr>
	<tr> <td class="td-right">[[Is Keyword]]:</td> <td class="td-left"><input name="keyword" type="checkbox" #if ($property.keyword == true) checked #end value="true"/> </td> </tr>
	<tr> <td class="td-right">[[Index]]:</td> <td class="td-left"><input name="index" type="checkbox" #if ($property.index == true) checked #end value="true"/> </td> </tr>
	<tr> <td class="td-right">[[Stored]]:</td> <td class="td-left"><input name="stored" type="checkbox" #if ($property.stored == true) checked #end value="true"/> </td> </tr>
	<tr> <td class="td-right">[[In Filters]]:</td> <td class="td-left"><input name="filter" type="checkbox" #if ($property.filter == true) checked #end value="true"/> </td> </tr>
	
	
	<tr> <td class="td-right">[[View Type]]:</td>
	<td class="td-left">
	<select name="viewtype">
		<option value="" >Text</option>
		<option value="boolean" #if ($property.viewtype == "boolean") selected #end >[[Boolean]]</option>
		<option value="number" #if ($property.viewtype == "number") selected #end >[[Number]]</option>
		<option value="long" #if ($property.viewtype == "long") selected #end >Long</option>
		<option value="double" #if ($property.viewtype == "double") selected #end >Double</option>
		<option value="date" #if ($property.viewtype == "date") selected #end >[[Date]]</option>
		<option value="list" #if ($property.viewtype == "list") selected #end >[[List]]</option>
		<option value="permission" #if ($property.viewtype == "permission") selected #end >[[Permission]]</option>
		<option value="file" #if ($property.viewtype == "file") selected #end >[[File]]</option>
		<option value="image" #if ($property.viewtype == "image") selected #end >[[Image]]</option>
		<option value="multiselect" #if ($property.viewtype == "multiselect") selected #end >[[Multi-Select]]</option>
		<option value="textjoin" #if ($property.viewtype == "textjoin") selected #end >[[Text Join]]</option>
	</select>	

	</td>
	</tr>

	<tr> <td class="td-right">[[Data Type]]:</td>
	<td class="td-left">
	<select name="datatype">
		<option value="" >Text</option>
		<option value="boolean" #if ($property.datatype == "boolean") selected #end >[[Boolean]]</option>
		<option value="number" #if ($property.datatype == "number") selected #end >[[Number]]</option>
		<option value="long" #if ($property.datatype == "long") selected #end >Long</option>
		<option value="double" #if ($property.datatype == "double") selected #end >Double</option>
		<option value="date" #if ($property.datatype == "date") selected #end >[[Date]]</option>
		<option value="list" #if ($property.datatype == "list") selected #end >[[List]]</option>
		<option value="file" #if ($property.datatype == "file") selected #end >[[File]]</option>
		<option value="image" #if ($property.datatype == "image") selected #end >[[Image]]</option>
	</select>
	<a id="${property.id}editlist" style="display:none;" class="thickbox" href="$home$apphome/views/settings/metadata/list/modifylist.html?catalogid=$property.getListCatalogId()&searchtype=$property.getListId()&name=$property.name&iframe=true&width=500&height=400">edit list</a>
	<input type="button" onclick="jQuery('#${property.id}editlist').click();" value="edit list"/>
	</td>
	</tr>

	<tr> <td class="td-right">[[List Id]]:</td> <td class="td-left"><input name="listid" value="$!property.listid"/> </td> </tr>
	<tr> <td class="td-right">[[List Catalog Id]]:</td> <td class="td-left"><input name="listcatalogid" value="$!property.listcatalogid"/> </td> </tr>
	<tr> <td class="td-right">[[List Sort Field]]:</td> <td class="td-left"><input name="sort" value="$!property.sort"/> </td> </tr>
	<tr> <td class="td-right">[[List Query]]:</td> <td class="td-left"><input name="query" value="$!property.query"/> </td> </tr>
	<tr> <td class="td-right">[[Foreign Key ID]]:</td> <td class="td-left"><input name="foreignkeyid" value="$!property.foreignkeyid"/> </td> </tr>
		
	</table>
	<div class="embutton" style="float:left;">
		<input id="deleteAttribute" type="submit" value="Delete"/>
	</div>
	<div class="embutton" style="float:right;">
		<input id="cancel" type="submit" value="Cancel"/>
		<input type="submit" value="Save"/>
	</div>
</form>

<script type="text/javascript">
jQuery(document).ready(function(){
	var label = jQuery('input#label').val();
	if (label.length>0){
		jQuery('h1#attributeEditorTitle').text("Edit Attribute Properties > " + label);
	}else{
		jQuery('h1#attributeEditorTitle').text("Edit Attribute Properties > New");
	}
	jQuery('input#deleteAttribute').click(function(){
		var userResponse = confirm("Are you sure you want to delete this attribute?  Any data associated with this attribute will be lost.");
		//delete
		//display deleted
		if (userResponse){
			jQuery('form').attr('action', 'deleteproperty.html').submit();
		}
	});
	jQuery('input#cancel').click(function(){
		parent.jQuery("#fancy_close").trigger("click");
	});
})
</script>
