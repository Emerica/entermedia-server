
#set( $asset = $mediaarchive.getAsset($context.getRequestParameter("assetid")) )    
#set( $sourcepath = $asset.sourcepath )
#set( $source = "$home/${applicationid}/views/modules/asset/downloads/converted/cache/${sourcepath}/video.mp4" )
#set( $webmsource = "$home/${applicationid}/views/modules/asset/downloads/converted/cache/${sourcepath}/video.webm" )
#set( $thumb = "$home/${applicationid}/views/modules/asset/downloads/preview/large/${sourcepath}/thumb.jpg" )
#set( $clientroot = $context.getContentProperty("clientroot") )
$context.putPageValue("asset", $asset)

				<div class="container-fluid" style="background-color:#eee;">
						<div class="row" >

						    <div class="col-md-1" style="padding: 0px 0 0 70px; ">	
								<nav class="navbar navbar-default" role="navigation" style="width:200px;margin:50px 0 0 0px;display:block;">											
								<div style="background-color:#666;color:white;padding:4px;">
									Add Metadata
								</div>	
									<form class="ajaxform addnewtimeline" style="padding: 10px; text-align:center;">
									<label>Metadata Type</label>
									<select>
										<option>Scene</option>
										<option>Talent</option>
									</select>
									
									<label>Start time</label>
										<input value="21:12" size="6"/>
									<label>End time</label>
										<input value="21:12" size="6"/>							
											<br>	<br>		
									<input type="submit" value="Add"/>
									</form>
								</nav>
							</div>
							<div class="col-md-8" style="padding: 0px;">	
								<div  id="video-container">
									<div class="video-holder" id="showcaseclient" data-clientroot="$clientroot" data-dataid="$asset.id">
										<div id='cuePlayer' style="padding:6px;text-align:right;">
											<video class="" id="video2" preload="no" controls  webkit-playsinline poster="$thumb" style="width:600px;">
												<source src="$source" type="video/mp4" />
												<source src="$webmsource" type="video/webm" />
											</video>
										</div>
										</div>									
								</div>
						    </div>
						    <div class="col-md-3" style="padding: 0px;">	
							   $pages.include("$apphome/views/modules/asset/editor/timeline/details/cuepointactions.html", $context)
						    </div>
						</div>	
				</div>
					
<script type="text/javascript">
$(document).ready(function() {

#set($time = $context.getRequestParameter("jumpto"))
#if($time)

	 var video = jQuery("#video");
	jQuery("#video").bind("loadeddata", function() {
		jump('$time');
		pause();
	});
#end	
	jQuery(".timecell").livequery(function()
	{
		var mainimage = $(this);
		var clickspot;
		var imageposition;
		 
		mainimage.on("mousedown", function(event)
		{
			clickspot = event;
			imageposition = mainimage.position();
			console.log(event);
			return false;
		});
	
		mainimage.on("mouseup", function(event)
		{
			clickspot = false;
			return false;
		});
		
		mainimage.on("mousemove", function(event)
		{
			//if( isMouseDown() )
			if( clickspot )
			{
				var changetop = clickspot.pageY - event.pageY;
				var changeleft = clickspot.pageX - event.pageX;
				
				var left = imageposition.left - changeleft;
				var top = imageposition.top;// - changetop;
				
				$(this).css({"left" : left + "px", "top" : top + "px"});
			}	
		});	
	});
});	
</script>

<style type="text/css">
#video_overlays {
position:absolute;
float:left;
    width:100%;
    min-height:100%;
    background-color:#000;
    z-index:300000;
}
</style>


<link rel="stylesheet" href="$home$apphome/theme/styles/jquery/timeslider.css">

##loop over the details looking for objectarrays

##$asset.getObjects("")
<div id="slider123" class="time-slider" style="height: 45px;">
	<div class="ruler" >
		<div id="tc1" p_id="c1" class="timecell scene" style="left: 60.174px; width: 273.018px; cursor: move;">Scene: <b>Intro</b></div>
	</div>
</div>	

<div id="slider123" class="time-slider" style="height: 45px;">
	<div class="ruler" >
		<div id="tc1" p_id="c1" class="timecell scene" style="left: 360.174px; width: 273.018px; cursor: move;">Scene: <b>Messi scores!</b></div>
	</div>
</div>	



<div id="slider123" class="time-slider" style="height: 45px;">
	<div class="ruler" >
		<div id="tc1" p_id="c1" class="timecell" style="left: 60.174px; width: 173.018px; cursor: move;">Talent: <b>John Smith</b></div>
	</div>
</div>	

<div id="slider123" class="time-slider" style="height: 45px;">
	<div class="ruler" >
		<div id="tc1" p_id="c1" class="timecell" style="left: 360.174px; width: 273.018px; cursor: move;">Talent: <b>Ian Miller</b></div>
	</div>
</div>	

<div id="slider123" class="time-slider" style="height: 45px;">
	<div class="ruler" >
		<div id="tc1" p_id="c1" class="timecell" style="left: 660.174px; width: 573.018px; cursor: move;">Talent: <b>Ian Miller</b></div>
	</div>
</div>	



<div id="slider123" class="time-slider" style="height: 45px;">
	<div class="ruler" style="height: 66px;">
		<div class="bg"></div>
		<div class="bg-event"></div>
#set( $added = 0)		
#set( $space = 15)
#foreach($block in $blocks)
		<div id="title_${added}"	class="graduation-title"   style="left: ${added}px">$block.getLabel()</div>
	#set( $added = $added + $space)
		<div id="tick_${added}" 	class="graduation" style="left: ${added}px"></div>
		#set( $added = $added + $space)
		<div id="tick_${added}" 	class="graduation" style="left: ${added}px"></div>
		#set( $added = $added + $space)
		<div id="tick_${added}" 	class="graduation" style="left: ${added}px"></div>
		#set( $added = $added + $space)
		<div id="tick_${added}" 	class="graduation" style="left: ${added}px"></div>
		<div id="middle_${added}" 	class="graduation middle" style="left: ${added}px"></div>
#end
	##remaining ticks, just to run off the end the page
	#foreach($block in $blocks)
		#set( $added = $added + $space)
		<div id="tick_${added}" 	class="graduation" style="left: ${added}px"></div>
		#set( $added = $added + $space)
		<div id="tick_${added}" 	class="graduation" style="left: ${added}px"></div>
		#set( $added = $added + $space)
		<div id="tick_${added}" 	class="graduation" style="left: ${added}px"></div>
		#set( $added = $added + $space)
		<div id="tick_${added}" 	class="graduation" style="left: ${added}px"></div>
		<div id="middle_${added}" 	class="graduation middle" style="left: ${added}px"></div>
	#end	
	</div>
	
	
</div>
