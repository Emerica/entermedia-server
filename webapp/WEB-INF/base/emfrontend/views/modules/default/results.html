#set( $module = $context.findValue("module") )

    
#if ( $hits.totalPages == 0 )
$pages.stream("/${content.searchhome}/empty.html", $context)	
                                                                                                                                                                                                              
#else



#set( $resultdetail = $searcherManager.getSearcher("$content.catalogid", "$content.searchtype").getDetailsForView("${module}/${module}resultstable", $user))


#set($viewsearcher = $searcherManager.getSearcher($catalogid, "view"))
#set( $query = $viewsearcher.createSearchQuery().append("module",$module) )
$!query.addSortBy("ordering")
#set($views = $viewsearcher.search($query))

#set ( $viewpath = $views.first() )

##set ( $canedit = $context.getPageValue("${module}edit") )

<form name="selectionform" action="$home${content.searchhome}/common/selection/toggle.html">
<input type="hidden" name="hitsname" value="hits"/>

<div class="tablecontainer">

<div class="editholder" style="margin-top: 0;">
<a id="editboxlink" class="ir" href="$home$apphome/views/settings/modules/$module/metadata/views/index.html?viewid=${module}&viewpath=${module}/${module}resultstable">Edit</a>
</div>
<div id="emselectable">
<table class="emdata striped" id="module-results-table">

<thead>
<tr class="tableheader" >
##<th></th>

#foreach( $detail in $resultdetail )
		<th  class="sortable #if( $edit)editcolumnheader #end #if( $sortby.startsWith($detail.getId() ) ) currentsort #if( $sortby.endsWith("Up") ) up #else down #end #end" id="$detail.id">
					
			<div id="$detail.id" hitssessionid="$hits.getSessionId()"  editing="$edit" class="headerdraggable headerdroppable"> 
					#text( $detail.text )
					#if( $edit)
						<a class="baseemenableonhover ajax edit-table-header" targetdivinner="resultsdiv" href="$home$apphome/components/results/addremovecolumns.html?oemaxlevel=1&searchtype=asset&hitssessionid=$hits.getSessionId()&editheader=true&removecolumn=$detail.id"><img title="Remove" src="$home$themeprefix/images/navigation/deletesm.png" /></a>
					
					#end
			</div>
		 </th>  
	
#end

</tr>
</thead>
<tbody>
    
    
    
    #set( $even = true )
#set($count = 0)
#foreach ( $cell in $hits.getPageOfHits() )
   $context.putPageValue('data', $cell)
    $context.putPageValue('cell', $cell)
    
     #set( $clink = "$home${content.linkprefix}${cell.id}${content.linksuffix}")
     
      
        
        <tr #if( $caneditdata )  rowid="$home$content.searchhome/edit/edit.html?id=${cell.id}&viewid=$viewpath.id&viewpath=$module/$viewpath.id&hitssessionid=${hits.sessionId}" #else rowid="$home$content.searchhome/view/view.html?id=${cell.id}&hitssessionid=${hits.sessionId}" #end >
  
    
   
    
#if($content.isPropertyTrue("showactions"))
<!--
<td align="center">



<input type="checkbox" class="selectionbox" name="count" value="" #if($hits.isSelectedOnPage(${count})) checked #end onclick="toggleHit('check_$count', '$!hits.indexOf(${count})', '$hits.sessionId');" />
<div id="check_${count}">
</div>


<input type="checkbox" name="count" value="$!hits.indexOf(${count})" #if($hits.isSelectedOnPage(${count})) checked #end />
<input type="hidden" name="origURL" value="$url_util.requestPathWithArgumentsNoContext()" />

</td>
-->
#end
##<td style="width:30px; text-align: center;">$pages.include("/${content.searchhome}/link.html", $context)</td>

#foreach( $detail in $resultdetail )

<td class="editfield highlightMe" id="$detail.id" halign="right"  >
   <div id="edit_${cell.id}_$detail.id">
			
		    
           
              $context.putPageValue('val',  $!cell.get($detail.id))
              $context.putPageValue('detail',  $detail)
              $pages.include("/${content.searchhome}/cell.html", $context)    
    		

    </div>
</td>
#end


</tr>
#set($count = $count + 1)
#end
</tbody>
</table>
</div>
#if($content.isPropertyTrue("showactions"))
## <div align="left" id="messagearea">$pages.include("/${content.searchhome}/selections/togglepage.html")</div>
#end

   <div id="navigationrow">

 $pages.stream("/${content.searchhome}/navigate.html", $context)		
</div>

</div></div>



</form>



#end

## $pages.include("/${content.searchhome}/actions.html", $context)