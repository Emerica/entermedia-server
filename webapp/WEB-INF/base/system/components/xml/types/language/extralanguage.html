#set( $detailid = $context.getRequestParameter("detailid"))
#set( $languagecode = $context.getRequestParameter("languagecode"))
#set( $language_count = $context.getRequestParameter("count"))
#set( $map = $data.getValue($detailid))

#set($languages = $mediaarchive.getList("locale"))

#set($usedlanguages = $context.getRequestParameters("usedlanguages") )
<div class="languagesaddform">
	<div style="float:left; padding:0 5px">
		<select class="select2 lenguagepicker" id="languages_${detailid}_${language_count}" name="${detailid}.language" data-detailid="${detailid}">
			#foreach($locale in $languages)
			#if( !$usedlanguages.contains($locale.id))
			<option value="$!locale.id" #if($!languagecode==$!locale.id) selected="selected" #end>$!locale</option>
			#end
			#end
		</select>
	</div>
	<div style="float:left;">
		#if($languagecode!='') 
			#set($language_textbox = ${detailid} + "." + $languagecode) 
		#else 
			#set($language_textbox = ${detailid} + "." + ${languages[0].id}) 
		#end
		<input type="text" id="languages_${detailid}_${language_count}_value" class="#if($language_count == "1" && $detail.isRequired() && !$multiedit) required #end" name="$language_textbox" value="$!map.getText($languagecode)" >
	</div>
	<div class='clearfix'></div>	
</div>